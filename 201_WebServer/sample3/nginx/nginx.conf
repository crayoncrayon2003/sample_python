server {
    listen 80;
    server_name localhost;

    # コンテナ内のドキュメントルートディレクトリを指定
    root /usr/share/nginx/html;

    # /report.csv へのリクエストを処理する location ブロック
    # "=" をつけることで、このパスへの完全一致の場合のみ適用される
    location = /report.csv {
        # ベーシック認証を有効にする
        auth_basic "Restricted CSV File";
        # 認証に使うパスワードファイルの場所を指定
        auth_basic_user_file /etc/nginx/conf.d/.htpasswd;

        # Content-Type が text/plain にならないよう、text/csv を明示
        default_type text/csv;
    }

    # 上記の location に一致しない、その他のすべてのリクエストは404を返す
    location / {
        return 404;
    }
}